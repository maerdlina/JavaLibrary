package singleton.simple;

public class Simple {
    // –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä
    private Simple() {
        System.out.println("–°–æ–∑–¥–∞—ë—Ç—Å—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î...");
    }

    // –ø—Ä–∏–≤–∞—Ç–Ω–æ–µ —Å—Ç–∞—Ç–∏—á–Ω–æ–µ –ø–æ–ª–µ
    private static Simple instance;

    // –ø—É–±–ª–∏—á–Ω—ã–π —Å—Ç–∞—Ç–∏—á–Ω—ã–π –º–µ—Ç–æ–¥ getInstance()
    // –°–ø–æ—Å–æ–± 1: synchronized - —á—Ç–æ–±—ã –ø—Ä–∏ "–≥–æ–Ω–∫–µ" –Ω–µ –±—ã–ª–æ
    // –ø—Ä–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–æ—Ç–æ–∫–∞—Ö —Å–æ–∑–¥–∞–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ –æ–±—ä–µ–∫—Ç–æ–≤
    // ‚ùå –ú–∏–Ω—É—Å: –∫–∞–∂–¥—ã–π –≤—ã–∑–æ–≤ getInstance() ‚Äî –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞, –¥–∞–∂–µ –∫–æ–≥–¥–∞ –æ–±—ä–µ–∫—Ç —É–∂–µ —Å–æ–∑–¥–∞–Ω (–ª–∏—à–Ω—è—è –∑–∞–¥–µ—Ä–∂–∫–∞).

    /* public static synchronized Simple getInstance() {
        if(instance == null) {
            instance = new Simple();
        }
        return instance;
    }*/

    // üõ† –°–ø–æ—Å–æ–± 2: Double-Checked Locking (–ª—É—á—à–µ –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏)
    /*
    ‚úÖ –ü–ª—é—Å—ã:
    –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º —Å–æ–∑–¥–∞–Ω–∏–∏.
    –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ ‚Äî –æ–±—ã—á–Ω—ã–π –±—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø.
    volatile –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—ã —Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º –≤ –ø–æ—Ç–æ–∫–∞—Ö.
    üí° –≠—Ç–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Å–ø–æ—Å–æ–± –≤—Ä—É—á–Ω—É—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–π Singleton.
     */

    public static Simple getInstance() {
        // –ü–µ—Ä–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ (–±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏)
        if (instance == null) {
            // –ë–ª–æ–∫–∏—Ä—É–µ–º —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –æ–±—ä–µ–∫—Ç –µ—â—ë –Ω–µ —Å–æ–∑–¥–∞–Ω
            synchronized (Simple.class) {
                // –í—Ç–æ—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ (–≤–Ω—É—Ç—Ä–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏)
                if (instance == null) {
                    instance = new Simple();
                }
            }
        }
        return instance;
    }

    public String connect(){
        return "Connected to the database";
    }
}
